{
  "version": "1.0.0",
  "tools": [
    {
      "id": "orbstack",
      "name": "OrbStack",
      "description": "Docker 容器管理工具",
      "detection": {
        "command": "orb",
        "arguments": [
          "--version"
        ],
        "customPaths": [
          "/Applications/OrbStack.app"
        ],
        "fallbackDetection": {
          "type": "file",
          "path": "~/.orbstack/config/docker.json"
        }
      },
      "sources": [
        {
          "id": "docker-official",
          "name": "官方源",
          "url": "https://registry-1.docker.io",
          "description": "Docker 官方镜像仓库"
        },
        {
          "id": "docker-aliyun",
          "name": "阿里云",
          "url": "https://registry.cn-hangzhou.aliyuncs.com",
          "description": "阿里云容器镜像服务",
          "region": "CN"
        },
        {
          "id": "docker-tencent",
          "name": "腾讯云",
          "url": "https://mirror.ccs.tencentyun.com",
          "description": "腾讯云容器镜像服务",
          "region": "CN"
        },
        {
          "id": "docker-huawei",
          "name": "华为云",
          "url": "https://swr.cn-north-4.myhuaweicloud.com",
          "description": "华为云容器镜像服务",
          "region": "CN"
        },
        {
          "id": "docker-163",
          "name": "网易163",
          "url": "https://hub-mirror.c.163.com",
          "description": "网易163镜像服务",
          "region": "CN"
        },
        {
          "id": "docker-ustc",
          "name": "中科大 USTC",
          "url": "https://docker.mirrors.ustc.edu.cn",
          "description": "中科大镜像服务",
          "region": "CN"
        }
      ],
      "strategy": {
        "type": "jsonpath",
        "filePath": "~/.orbstack/config/docker.json",
        "set": {
          "jsonpath": "registry-mirrors",
          "value": {
            "type": "array",
            "items": [
              {
                "type": "string",
                "value": "{{url}}"
              }
            ]
          },
          "ensureStructure": {
            "createIfMissing": true,
            "createParentDirectories": true,
            "defaultStructure": "{\"registry-mirrors\":[\"{{url}}\"]}"
          }
        },
        "get": {
          "jsonpath": "registry-mirrors.0"
        }
      },
      "backup": {
        "filePath": "~/.orbstack/config/docker.json",
        "backupFileName": "docker.json.backup",
        "backupOriginal": true
      },
      "postSwitchActions": [
        {
          "type": "showAlert",
          "delay": 0,
          "showAlert": {
            "title": "重启 OrbStack",
            "message": "镜像源已切换，请重启 OrbStack 以使配置生效。",
            "success": true
          }
        },
        {
          "type": "command",
          "delay": 1,
          "command": "orb",
          "arguments": [
            "restart",
            "docker"
          ]
        }
      ],
      "metadata": {
        "supportedPlatforms": [
          "macOS"
        ],
        "supportsSpeedTest": true,
        "documentationURL": "https://docs.orbstack.dev/"
      }
    }
  ]
}
